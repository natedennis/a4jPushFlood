<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:b="http://richfaces.org/sandbox/bootstrap"
	xmlns:c="http://java.sun.com/jsp/jstl/core"	
	xmlns:rich="http://richfaces.org/rich"
	xmlns:forgeview="http://jboss.org/forge/view"	
	template="/resources/scaffold/pageTemplateQueue.xhtml">

	<f:metadata>
		<f:event type="preRenderView" listener="#{queuePopUpBean.test()}"/>
	</f:metadata>

	<ui:param name="pageTitle"
		value="Global Queue - Monarch" />

	<ui:define name="header">
		OASIS - Global Queue
	</ui:define>

	<ui:define name="main">
	
	 	<h:form id="changeform">
	 	
		 	 <rich:popupPanel id="popup"  modal="true" resizeable="true" onmaskclick="#{rich:component('popup')}.hide();">
		 		<a4j:outputPanel id="popuprender">
			       		<h:panelGrid columns="2">
							<h:outputText style="white-space:nowrap" value="ID:" />
							<h:outputText value="#{queuePopUpBean.id}"/>
							<h:outputText style="white-space:nowrap" value="Source:" />
							<h:outputText value="#{queuePopUpBean.clickSource}"/>
						</h:panelGrid>
					</a4j:outputPanel>
				 <a href="#" onclick="#{rich:component('popup')}.hide()">hide this panel</a>:
		    </rich:popupPanel>
	 	</h:form>
	 	
		<h:form id="globalform">

		<a4j:outputPanel id="cfpanel" ajaxRendered="false">
			<h:dataTable id="globalQueueEncounters" styleClass="data-table"
				value="#{queuePopUpBean.testList}" var="_item">
				<h:column>
					<f:facet name="header">
						<h:outputText value="Working" />
					</f:facet>
				<a4j:commandLink   value="Working"  action="#{queuePopUpBean.init()}"
							execute="@this" render="popuprender"
							oncomplete="return #{rich:component('popup')}.show()">
 						<a4j:param name="id" value="#{_item}" assignTo="#{queuePopUpBean.id}" />		  
				   	    <a4j:param name="clickSource"  value="0" assignTo="#{queuePopUpBean.clickSource}"/>
				 
				    <rich:componentControl target="popup" operation="show" event="complete" >
			            <a4j:param noEscape="true" value="event" />
	    		        <rich:hashParam>
		        	        <f:param name="width" value="500" />
	                		<f:param name="height" value="300" />
			                <f:param name="minWidth" value="300" />
	        		        <f:param name="minHeight" value="150" />
			                <a4j:param noEscape="true" name="left" value="(jQuery(window).width()/2)-250" />	
	        		        <a4j:param noEscape="true" name="top" value="(jQuery(window).height()/2)-150" />
			            </rich:hashParam>
        			</rich:componentControl>
				</a4j:commandLink>
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Noo Event Passed.. undefined hide method" />
					</f:facet>
				<a4j:commandLink   value="No Event Passed.. undefined hide method" action="#{queuePopUpBean.init()}"
							execute="@this" render="popuprender"
							oncomplete="return #{rich:component('popup')}.show()">
 						<a4j:param name="id" value="#{_item}" assignTo="#{queuePopUpBean.id}" />		  
 						<a4j:param name="clickSource"  value="0" assignTo="#{queuePopUpBean.clickSource}"/>
				 
				</a4j:commandLink>
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Should work but doesnt" />
					</f:facet>				
				<a4j:commandLink   value="Should work but doesnt" action="#{queuePopUpBean.init()}"
							execute="@this" render="popuprender">
 						<a4j:param name="id" value="#{_item}" assignTo="#{queuePopUpBean.id}" />		  	  
				   	    <a4j:param name="clickSource"  value="0" assignTo="#{queuePopUpBean.clickSource}"/>
				 
				    <rich:componentControl target="popup" operation="show" event="complete" >
			            <a4j:param noEscape="true" value="event" />
	    		        <rich:hashParam>
		        	        <f:param name="width" value="500" />
	                		<f:param name="height" value="300" />
			                <f:param name="minWidth" value="300" />
	        		        <f:param name="minHeight" value="150" />
			                <a4j:param noEscape="true" name="left" value="(jQuery(window).width()/2)-250" />	
	        		        <a4j:param noEscape="true" name="top" value="(jQuery(window).height()/2)-150" />
			            </rich:hashParam>
        			</rich:componentControl>
				</a4j:commandLink>
			</h:column>
			</h:dataTable>
	</a4j:outputPanel>
	</h:form>
	</ui:define>

</ui:composition>